


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000 40059004 
                       GPIO_PORTBR
                               EQU              0x40059004  ;GPIO Port B (AHB) 
                                                            0x40059000 base de 
                                                            datos, mascara lect
                                                            ura
    3 00000000 40059008 
                       GPIO_PORTBW
                               EQU              0x40059008  ;GPIO Port B (AHB) 
                                                            0x40059000 base de 
                                                            datos mascara escri
                                                            tura
    4 00000000 40059400 
                       GPIO_PORTB_DIR_R
                               EQU              0x40059400  ;Offset 0x400=>  0 
                                                            es entrada, 1 salid
                                                            a
    5 00000000 40059420 
                       GPIO_PORTB_AFSEL_R
                               EQU              0x40059420  ;Offset 0x420=>  0 
                                                            funcion como GPIO, 
                                                            1 funciona como per
                                                            iferico
    6 00000000 4005951C 
                       GPIO_PORTB_DEN_R
                               EQU              0x4005951C  ;Offset 0x51C=>  0 
                                                            funcina como NO dig
                                                            ital, 1 funcion dig
                                                            ital
    7 00000000 40059528 
                       GPIO_PORTB_AMSEL_R
                               EQU              0x40059528  ;Offset 0x528=>  0 
                                                            Deshabilita funcion
                                                             analogica, 1 activ
                                                            a analogica
    8 00000000 4005952C 
                       GPIO_PORTB_PCTL_R
                               EQU              0x4005952C  ;Offset 0x52C=>  0 
                                                            Selecciona funcion 
                                                            alternativa
    9 00000000 4005950C 
                       GPIO_PORTB_ODR_R
                               EQU              0x4005950C  ;Offset 0x50C=>  1 
                                                            Activa drenador abi
                                                            erto
   10 00000000         ;--------Direccion para activar y verificar puertos-----
                       -------------------------------------
   11 00000000         
   12 00000000 400FE608 
                       SYSCTL_RCGCGPIO_R
                               EQU              0x400FE608  ;Base 0x400F.E000, 
                                                            Offset 0x608=> 1 ac
                                                            tiva puerto, 0 desa
                                                            ctiva puerto
   13 00000000 400FEA08 
                       SYSCTL_PRGPIO_R
                               EQU              0x400FEA08  ;Base 0x400F.E000, 
                                                            Offset 0xA08 indica



ARM Macro Assembler    Page 2 


                                                             puerto listo
   14 00000000 00000002 
                       SYSCTL_RCGCGPIO_R12
                               EQU              0x00000002  ;1 Enable and provi
                                                            de a clock to GPIO 
                                                            Port D in Run mode
   15 00000000 00000002 
                       SYSCTL_PRGPIO_R12
                               EQU              0x00000002  ;Bandera puerto lis
                                                            to D
   16 00000000         
   17 00000000         ;**********************Direccion para activar SysTick***
                       ************************
   18 00000000 E000E018 
                       SYSCTL_STCURRENT
                               EQU              0XE000E018  ;registro para  ver
                                                             la cuenta del syst
                                                            ick
   19 00000000 E000E014 
                       SYSCTL_STRELOAD
                               EQU              0XE000E014  ;registro para carg
                                                            ar valor
   20 00000000 E000E010 
                       SYSCTL_STCTRL
                               EQU              0XE000E010  ;registro de contro
                                                            l
   21 00000000         
   22 00000000         ;----------------------------MACRO PARA CALCULAR RETARDO
                       ------------------------
   23 00000000                 MACRO
   24 00000000                 REtardo          $VALOR
   25 00000000                 PUSH             {R7, LR}
   26 00000000                 MOV              R7, $VALOR
   27 00000000                 LSL              R7, R7, #0x02
   28 00000000                 BL               DELAY_480
   29 00000000                 POP              {R7,LR}
   30 00000000                 MEND
   31 00000000         ;----------------------------------------------
   32 00000000         
   33 00000000                 AREA             |.text|, CODE, READONLY, ALIGN=
2
   34 00000000                 THUMB
   35 00000000         
   36 00000000                 IMPORT           Start
   37 00000000                 IMPORT           TEMPERATURA
   38 00000000                 EXPORT           UP_DS18B20
   39 00000000                 EXPORT           INI_reset
   40 00000000                 EXPORT           ENVIA_CERO
   41 00000000                 EXPORT           ENVIA_UNO
   42 00000000                 EXPORT           LECTURA
   43 00000000         ;-------------------------------------------------------
                       -------------------
   44 00000000         UP_DS18B20
   45 00000000         ; activa reloj para el puerto D
   46 00000000 4976            LDR              R1, =SYSCTL_RCGCGPIO_R ; R1 = S
                                                            YSCTL_RCGCGPIO_R di
                                                            reccion que  1 acti
                                                            va puerto
   47 00000002 6808            LDR              R0, [R1, #0x00] ; R0 = [R1] lee



ARM Macro Assembler    Page 3 


                                                             valor
   48 00000004 F040 0002       ORR              R0, R0, #SYSCTL_RCGCGPIO_R12 ; 
                                                            R0 = R0|SYSCTL_RCGC
                                                            GPIO_R12, activa re
                                                            loj de puerto
   49 00000008 6008            STR              R0, [R1]    ; [R1] = R0  se gua
                                                            rda
   50 0000000A         
   51 0000000A         ;Verifica si el reloj es estable
   52 0000000A 4975            LDR              R1, =SYSCTL_PRGPIO_R ; R1 = SYS
                                                            CTL_PRGPIO_R (point
                                                            er)
   53 0000000C         GPIONinitloop
   54 0000000C 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   55 0000000E F010 0002       ANDS             R0, R0, #SYSCTL_PRGPIO_R12 ; R0
                                                             = R0&SYSCTL_PRGPIO
                                                            _R12
   56 00000012 D0FB            BEQ              GPIONinitloop ; if(R0 == 0), ke
                                                            ep polling
   57 00000014         
   58 00000014         ; Direccion de salida
   59 00000014 4973            LDR              R1, =GPIO_PORTB_DIR_R ; R1 = GP
                                                            IO_PORTd_DIR_R 
   60 00000016 6808            LDR              R0, [R1]    ; R0 = [R1] 
   61 00000018 F040 0002       ORR              R0, R0, #0x02 ; R0 = R0|0xFF (t
                                                            odos los pines del 
                                                            puerto D salida)
   62 0000001C F020 0001       BIC              R0, R0, #0x01
   63 00000020 6008            STR              R0, [R1]    ; [R1] = R0
   64 00000022         
   65 00000022         ; Registro de funcion alternativa
   66 00000022 4971            LDR              R1, =GPIO_PORTB_AFSEL_R ; R1 = 
                                                            GPIO_PORTN_AFSEL_R 
                                                            (pointer)
   67 00000024 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   68 00000026 F020 00FF       BIC              R0, R0, #0xFF ; R0 = R0&~0x02 (
                                                            disable alt funct o
                                                            n PN1)
   69 0000002A 6008            STR              R0, [R1]    ; [R1] = R0
   70 0000002C         
   71 0000002C         ; set digital enable register
   72 0000002C 496F            LDR              R1, =GPIO_PORTB_DEN_R ; R1 = GP
                                                            IO_PORTN_DEN_R (poi
                                                            nter)
   73 0000002E 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   74 00000030 F040 00FF       ORR              R0, R0, #0xFF ; R0 = R0|0xFF (a
                                                            ctiva digital I/O  
                                                            PD0-PD7)
   75 00000034 6008            STR              R0, [R1]    ; [R1] = R0
   76 00000036         
   77 00000036         ; set port control register
   78 00000036 496E            LDR              R1, =GPIO_PORTB_PCTL_R ; R1 = G
                                                            PIO_PORTN_PCTL_R (p
                                                            ointer)
   79 00000038 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            



ARM Macro Assembler    Page 4 


   80 0000003A F020 30FF       BIC              R0, R0, #0xFFFFFFFF ; R0 = R0&0
                                                            xFFFFFFFF (clear bi
                                                            t1 field)
   81 0000003E 6008            STR              R0, [R1]    ; [R1] = R0
   82 00000040         
   83 00000040         
   84 00000040         ; set analog mode select register
   85 00000040 496C            LDR              R1, =GPIO_PORTB_AMSEL_R ; R1 = 
                                                            GPIO_PORTN_AMSEL_R 
                                                            (pointer)
   86 00000042 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   87 00000044 F020 00FF       BIC              R0, R0, #0xFF ; R0 = R0&~0xFF (
                                                            disable analog func
                                                            tionality on PD0-PD
                                                            7)
   88 00000048 6008            STR              R0, [R1]    ; [R1] = R0
   89 0000004A         
   90 0000004A         ;activa drenador abierto
   91 0000004A         
   92 0000004A         ; activa drenador abierto
   93 0000004A 496B            LDR              R1, =GPIO_PORTB_ODR_R ; R1 = GP
                                                            IO_PORTB_ODR_R (poi
                                                            nter)
   94 0000004C 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
   95 0000004E F040 0002       ORR              R0, R0, #0x02 ; R0 = 
   96 00000052 6008            STR              R0, [R1]    ; [R1] = R0
   97 00000054         ;---------------------------SULTA  EL BUS DE DATOS------
                       ------------------------------------------
   98 00000054         ;suelta en bus
   99 00000054 4969            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  100 00000056 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
  101 00000058 F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno (MASTE
                                                            R TX=1 Resistor pul
                                                            lup)
  102 0000005C 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno
  103 0000005E 4770            BX               LR          ; regresa
  104 00000060         
  105 00000060         ;*******************************CODIGO DE RESET*********
                       ********************
  106 00000060         
  107 00000060         INI_reset
  108 00000060         
  109 00000060         ;se asegura que el bus este libre
  110 00000060 4966            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  111 00000062 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  112 00000064 F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno (MASTE
                                                            R TX=1 Resistor pul
                                                            lup)



ARM Macro Assembler    Page 5 


  113 00000068 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno
  114 0000006A BF00            nop
  115 0000006C BF00            nop
  116 0000006E         ;-------------------------------baja TX=0 por 480µs mini
                       mo--------------------------------------
  117 0000006E         
  118 0000006E 4963            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  119 00000070 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  120 00000072 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  121 00000076 6008            STR              R0, [R1]    ; [R1] = R0  lo env
                                                            ia al puerto      
  122 00000078                 REtardo          #480        ; llamo macro retar
                                                            do de 480 useg míni
                                                            mo
   25 00000078 B580            PUSH             {R7, LR}
   26 0000007A F44F 77F0       MOV              R7, #480
   27 0000007E EA4F 0787       LSL              R7, R7, #0x02
   28 00000082 F000 F88F       BL               DELAY_480
   29 00000086 E8BD 4080       POP              {R7,LR}
  123 0000008A         
  124 0000008A         ;------------------------------coloca TX em alta impedan
                       cia TX=1 Resistor pullup--------------------------------
                       -
  125 0000008A 495C            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  126 0000008C 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  127 0000008E F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno del pu
                                                            erto B
  128 00000092 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  129 00000094                 REtardo          #60         ;esperar entre 16 y
                                                             60 useg
   25 00000094 B580            PUSH             {R7, LR}
   26 00000096 F04F 073C       MOV              R7, #60
   27 0000009A EA4F 0787       LSL              R7, R7, #0x02
   28 0000009E F000 F881       BL               DELAY_480
   29 000000A2 E8BD 4080       POP              {R7,LR}
  130 000000A6         
  131 000000A6         ;-------------------------------verifica si DS18B20 esta
                        presente pulso RX=0-----------------------
  132 000000A6 4956            LDR              R1, =GPIO_PORTBR ; R1 = GPIO_PO
                                                            RTBW (pointer lectu
                                                            ra pin B0)
  133 000000A8         es_uno                               ;etiqueta de salto 
                                                            si no responde con 
                                                            cero   
  134 000000A8 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            



ARM Macro Assembler    Page 6 


  135 000000AA F240 0201 
              F2C0 0200        MOV32            R2, #0X01   ;muevo uno en 32 bi
                                                            t
  136 000000B2 4010            ANDS             R0, R2      ;verifica si el pin
                                                             B0 es cero DS18B20
                                                            
  137 000000B4 2800            CMP              R0, #0      ;lo compara con cer
                                                            o
  138 000000B6 D1F7            BNE              es_uno      ;si no es cero se q
                                                            ueda en el ciclo
  139 000000B8         ;--------------------------------verifica si DS18B20 sol
                       to el bus---------------------------------- 
  140 000000B8 4951            LDR              R1, =GPIO_PORTBR ; R1 = GPIO_PO
                                                            RTBW (pointer lectu
                                                            ra pin B0)
  141 000000BA         es_cero                              ;etiqueta de salto 
                                                            si no responde con 
                                                            uno  
  142 000000BA 6808            LDR              R0, [R1]    ; R0 = [R1] (value)
                                                            
  143 000000BC F240 0201 
              F2C0 0200        MOV32            R2, #0X01   ;muevo uno en 32 bi
                                                            t
  144 000000C4 4010            ANDS             R0, R2      ;verifica si el DS1
                                                            8B20 solto el bus R
                                                            X=1 pin B0, Resisto
                                                            r pullup
  145 000000C6 2800            CMP              R0, #0      ;lo compara con cer
                                                            o
  146 000000C8 D0F7            BEQ              es_cero     ;si es cero continu
                                                            a en el bucle
  147 000000CA 4770            BX               LR
  148 000000CC         
  149 000000CC         
  150 000000CC         ;----------------------FUNCIONES PARA ENVIAR CERO Y UNO 
                       AL DS18B20------
  151 000000CC         
  152 000000CC         ENVIA_CERO
  153 000000CC B403            PUSH             {R0, R1}
  154 000000CE 494B            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  155 000000D0 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  156 000000D2 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  157 000000D6 6008            STR              R0, [R1]    ; [R1] = R0  lo env
                                                            ia al puerto      
  158 000000D8                 REtardo          #75         ;llamo retardo entr
                                                            e 60-120 useg
   25 000000D8 B580            PUSH             {R7, LR}
   26 000000DA F04F 074B       MOV              R7, #75
   27 000000DE EA4F 0787       LSL              R7, R7, #0x02
   28 000000E2 F000 F85F       BL               DELAY_480
   29 000000E6 E8BD 4080       POP              {R7,LR}
  159 000000EA         ;-------------------------------------------------------
                       ------------------
  160 000000EA 4944            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO



ARM Macro Assembler    Page 7 


                                                            RTBW (pointer escri
                                                            tura)
  161 000000EC 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  162 000000EE F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno
  163 000000F2 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  164 000000F4 BF00            NOP                          ;tiempo 0.25 useg
  165 000000F6 BF00            NOP                          ;tiempo 0.25 useg
  166 000000F8 BF00            NOP                          ;tiempo 0.25 useg
  167 000000FA BF00            NOP                          ;tiempo 0.25 useg
  168 000000FC BC03            POP              {R0, R1}    ;tiempo 0.25 useg
  169 000000FE 4770            BX               LR
  170 00000100         ;-------------------------------------------------------
                       ---------------------------
  171 00000100         ENVIA_UNO
  172 00000100         
  173 00000100 B403            PUSH             {R0, R1}
  174 00000102 493E            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  175 00000104 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  176 00000106 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  177 0000010A 6008            STR              R0, [R1]    ; [R1] = R0  lo env
                                                            ia al puerto      
  178 0000010C BF00            NOP                          ;tiempo 0.25 useg
  179 0000010E BF00            NOP                          ;tiempo 0.25 useg
  180 00000110 BF00            NOP                          ;tiempo 0.25 useg
  181 00000112 BF00            NOP                          ;tiempo 0.25 useg
  182 00000114 BF00            NOP                          ;tiempo 0.25 useg
  183 00000116 BF00            NOP                          ;tiempo 0.25 useg
  184 00000118         ;-------------------------------------------------------
                       -------------------------
  185 00000118 4938            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (pointer escri
                                                            tura)
  186 0000011A 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  187 0000011C F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno
  188 00000120 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  189 00000122                 REtardo          #58         ;llama retardo
   25 00000122 B580            PUSH             {R7, LR}
   26 00000124 F04F 073A       MOV              R7, #58
   27 00000128 EA4F 0787       LSL              R7, R7, #0x02
   28 0000012C F000 F83A       BL               DELAY_480
   29 00000130 E8BD 4080       POP              {R7,LR}
  190 00000134 BC03            POP              {R0, R1}    ;restaura todo
  191 00000136 4770            BX               LR
  192 00000138         ;-----------------------------LECTURA DE SENSOR DE TEMPE



ARM Macro Assembler    Page 8 


                       RATURA---------------------------
  193 00000138         
  194 00000138         LECTURA
  195 00000138 B41F            PUSH             {R0, R1, R2, R3, R4} ;Salba los
                                                             registros que se v
                                                            an a utilizar
  196 0000013A EBA3 0303       SUB              R3, R3, R3  ;borra registro que
                                                             recibe dato inicia
                                                             en cero
  197 0000013E         
  198 0000013E         NUEVO_BIT
  199 0000013E 492F            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (puntero de es
                                                            critura)
  200 00000140 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  201 00000142 F020 0002       BIC              R0, R0, #0x02 ; cero en el bit 
                                                            uno (MASTER TX RESE
                                                            T PULSE)
  202 00000146 6008            STR              R0, [R1]    ; [R1] = R0  pone e
                                                            l puerto en cero 
  203 00000148 BF00            NOP                          ; 0.25 useg
  204 0000014A BF00            NOP                          ; 0.25 useg
  205 0000014C BF00            NOP                          ; 0.25 useg
  206 0000014E BF00            NOP                          ; 0.25 useg
  207 00000150 492A            LDR              R1, =GPIO_PORTBW ; R1 = GPIO_PO
                                                            RTBW (puntero de es
                                                            critura)
  208 00000152 6808            LDR              R0, [R1]    ; R0 = [R1] le el p
                                                            uerto B pin 1
  209 00000154 F040 0002       ORR              R0, R0, #0x02 ; coloca un uno e
                                                            n el bit uno pull u
                                                            p
  210 00000158 6008            STR              R0, [R1]    ; [R1] = R0  envia 
                                                            un uno (suelta bus 
                                                            TX, Resistor pullup
                                                            )
  211 0000015A         ;-------------------------------------------------------
                       ---------------------------------------
  212 0000015A                 REtardo          #14         ;espera 13 useg
   25 0000015A B580            PUSH             {R7, LR}
   26 0000015C F04F 070E       MOV              R7, #14
   27 00000160 EA4F 0787       LSL              R7, R7, #0x02
   28 00000164 F000 F81E       BL               DELAY_480
   29 00000168 E8BD 4080       POP              {R7,LR}
  213 0000016C 4924            LDR              R1, =GPIO_PORTBR ; R1 = GPIO_PO
                                                            RTBR (puntero de le
                                                            ctura) (0.5 useg)
  214 0000016E 6808            LDR              R0, [R1]    ;lee el dato en el 
                                                            pin B0 (0.25 useg)
  215 00000170         ;-----------validación----------------------------------
                       ---------------------------------------- 
  216 00000170 F240 0201 
              F2C0 0200        MOV32            R2, #0X01   ;muevo 0x01 al regi
                                                            stro R2 (0.5 useg)
  217 00000178 4010            ANDS             R0, R0, R2  ;verifica si es un 
                                                            cero (0.25 useg)
  218 0000017A B108            CBZ              R0, PONCERO ;si es cero salta a
                                                             PONCERO (0.25 useg



ARM Macro Assembler    Page 9 


                                                            )
  219 0000017C F443 4300       ORR              R3, R3, #0x00008000 ; si no es 
                                                             coloca un uno en e
                                                            n el regitro de dat
                                                            os (0.25 useg)
  220 00000180         PONCERO
  221 00000180 EA4F 0353       LSR              R3, R3, #1  ;lo rota una vez (0
                                                            .25 useg)
  222 00000184                 REtardo          #44
   25 00000184 B580            PUSH             {R7, LR}
   26 00000186 F04F 072C       MOV              R7, #44
   27 0000018A EA4F 0787       LSL              R7, R7, #0x02
   28 0000018E F000 F809       BL               DELAY_480
   29 00000192 E8BD 4080       POP              {R7,LR}
  223 00000196 1E64            SUBS             R4, R4, #1  ;decrementa el tama
                                                            ño del dato   (0.25
                                                             useg)
  224 00000198 B104            CBZ              R4, FIN
  225 0000019A E7D0            B                NUEVO_BIT
  226 0000019C         FIN
  227 0000019C F825 3E00       STRHT            R3, [R5]    ;LO CAMBIE
  228 000001A0 BC1F            POP              {R0, R1, R2, R3, R4}
  229 000001A2 4770            BX               LR
  230 000001A4         ;******************************RETARDO******************
                       *******************
  231 000001A4         
  232 000001A4         DELAY_480
  233 000001A4         ;---------------------SALVO REGISTROS EN LA PILA--------
                       ---------------------------
  234 000001A4 B407            PUSH             {R0,R1,R2}
  235 000001A6         
  236 000001A6         ;---------------------------------detiene el contador---
                       ----------------------------
  237 000001A6 4817            LDR              R0, =SYSCTL_STCTRL ;toma la dir
                                                            eccion del control 
                                                            tictak
  238 000001A8 6801            LDR              R1, [R0]    ;le el registro de 
                                                            estado
  239 000001AA F001 0100       AND              R1, #0X00000000 
                                                            ;lo coloca en cero
  240 000001AE 6001            STR              R1, [R0]    ;lo escribe en memo
                                                            ria
  241 000001B0         ;---------------------------CUENTA PARA 480µs =1800-----
                       ---------------------------
  242 000001B0 4815            LDR              R0, =SYSCTL_STRELOAD ;toma la d
                                                            irección del regist
                                                            ro STRELOAD
  243 000001B2 6007            STR              R7, [R0]    ;lo escribe en la m
                                                            emoria
  244 000001B4         ;------------------------------VALOR CONCURENTE IGUAL A 
                       CERO----------------------
  245 000001B4 4815            LDR              R0, =SYSCTL_STCURRENT 
                                                            ;Toma direccion
  246 000001B6 F04F 0100       MOV              R1, #0      ;mueve valor cero
  247 000001BA 6001            STR              R1, [R0]    ;inicializa con cer
                                                            o
  248 000001BC         ;---------------------------------Inicializa cuenta-----
                       ------------------------
  249 000001BC 4811            LDR              R0, =SYSCTL_STCTRL ;Toma direcc



ARM Macro Assembler    Page 10 


                                                            ion del registro co
                                                            ntol
  250 000001BE 6801            LDR              R1, [R0]    ;lee registro contr
                                                            ol
  251 000001C0 F041 0101       ORR              R1, #0X00000001 
                                                            ;activa contador
  252 000001C4 6001            STR              R1, [R0]    ;lo manda al regist
                                                            ro
  253 000001C6         ;-------------------------------------------------------
                       -------------
  254 000001C6 480F            LDR              R0, =SYSCTL_STCTRL
  255 000001C8         NO_desbordado
  256 000001C8 6801            LDR              R1, [R0]
  257 000001CA F44F 3280       MOV              R2, #0x00010000
  258 000001CE EA01 0102       AND              R1, R2      ;verifica si ya se 
                                                            desbordo
  259 000001D2 B901            CBNZ             R1, desbordado ;Salta si se des
                                                            bordo
  260 000001D4 E7F8            B                NO_desbordado ;Salta si no se d
                                                            esbordo
  261 000001D6         desbordado
  262 000001D6 BC07            POP              {R0,R1,R2}
  263 000001D8 4770            BX               LR
  264 000001DA         
  265 000001DA         
  266 000001DA 00 00           ALIGN                        ; make sure the end
                                                             of this section is
                                                             aligned
  267 000001DC                 END                          ; end of file
              400FE608 
              400FEA08 
              40059400 
              40059420 
              4005951C 
              4005952C 
              40059528 
              4005950C 
              40059008 
              40059004 
              E000E010 
              E000E014 
              E000E018 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M4.fp --apcs=int
erwork --depend=.\objects\sensor.d -o.\objects\sensor.o -ID:\Escritorio\LCD\RTE
\_Target_1 -I"D:\OS C (Postizo)\uVision\ARM\PACK\ARM\CMSIS\5.0.0\CMSIS\Include"
 -I"D:\OS C (Postizo)\uVision\ARM\PACK\Keil\TM4C_DFP\1.1.0\Device\Include\TM4C1
29" --predefine="__EVAL SETA 1" --predefine="__UVISION_VERSION SETA 522" --pred
efine="_RTE_ SETA 1" --predefine="TM4C1294NCPDT SETA 1" --list=.\listings\senso
r.lst sensor.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 33 in file sensor.s
   Uses
      None
Comment: .text unused
DELAY_480 000001A4

Symbol: DELAY_480
   Definitions
      At line 232 in file sensor.s
   Uses
      At line 28 in macro REtardo
      at line 122 in file sensor.s
Comment: DELAY_480 used once
ENVIA_CERO 000000CC

Symbol: ENVIA_CERO
   Definitions
      At line 152 in file sensor.s
   Uses
      At line 40 in file sensor.s
Comment: ENVIA_CERO used once
ENVIA_UNO 00000100

Symbol: ENVIA_UNO
   Definitions
      At line 171 in file sensor.s
   Uses
      At line 41 in file sensor.s
Comment: ENVIA_UNO used once
FIN 0000019C

Symbol: FIN
   Definitions
      At line 226 in file sensor.s
   Uses
      At line 224 in file sensor.s
Comment: FIN used once
GPIONinitloop 0000000C

Symbol: GPIONinitloop
   Definitions
      At line 53 in file sensor.s
   Uses
      At line 56 in file sensor.s
Comment: GPIONinitloop used once
INI_reset 00000060

Symbol: INI_reset
   Definitions
      At line 107 in file sensor.s
   Uses
      At line 39 in file sensor.s
Comment: INI_reset used once
LECTURA 00000138




ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

Symbol: LECTURA
   Definitions
      At line 194 in file sensor.s
   Uses
      At line 42 in file sensor.s
Comment: LECTURA used once
NO_desbordado 000001C8

Symbol: NO_desbordado
   Definitions
      At line 255 in file sensor.s
   Uses
      At line 260 in file sensor.s
Comment: NO_desbordado used once
NUEVO_BIT 0000013E

Symbol: NUEVO_BIT
   Definitions
      At line 198 in file sensor.s
   Uses
      At line 225 in file sensor.s
Comment: NUEVO_BIT used once
PONCERO 00000180

Symbol: PONCERO
   Definitions
      At line 220 in file sensor.s
   Uses
      At line 218 in file sensor.s
Comment: PONCERO used once
UP_DS18B20 00000000

Symbol: UP_DS18B20
   Definitions
      At line 44 in file sensor.s
   Uses
      At line 38 in file sensor.s
Comment: UP_DS18B20 used once
desbordado 000001D6

Symbol: desbordado
   Definitions
      At line 261 in file sensor.s
   Uses
      At line 259 in file sensor.s
Comment: desbordado used once
es_cero 000000BA

Symbol: es_cero
   Definitions
      At line 141 in file sensor.s
   Uses
      At line 146 in file sensor.s
Comment: es_cero used once
es_uno 000000A8

Symbol: es_uno
   Definitions
      At line 133 in file sensor.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Relocatable symbols

   Uses
      At line 138 in file sensor.s
Comment: es_uno used once
15 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTBR 40059004

Symbol: GPIO_PORTBR
   Definitions
      At line 2 in file sensor.s
   Uses
      At line 132 in file sensor.s
      At line 140 in file sensor.s
      At line 213 in file sensor.s

GPIO_PORTBW 40059008

Symbol: GPIO_PORTBW
   Definitions
      At line 3 in file sensor.s
   Uses
      At line 99 in file sensor.s
      At line 110 in file sensor.s
      At line 118 in file sensor.s
      At line 125 in file sensor.s
      At line 154 in file sensor.s
      At line 160 in file sensor.s
      At line 174 in file sensor.s
      At line 185 in file sensor.s
      At line 199 in file sensor.s
      At line 207 in file sensor.s

GPIO_PORTB_AFSEL_R 40059420

Symbol: GPIO_PORTB_AFSEL_R
   Definitions
      At line 5 in file sensor.s
   Uses
      At line 66 in file sensor.s
Comment: GPIO_PORTB_AFSEL_R used once
GPIO_PORTB_AMSEL_R 40059528

Symbol: GPIO_PORTB_AMSEL_R
   Definitions
      At line 7 in file sensor.s
   Uses
      At line 85 in file sensor.s
Comment: GPIO_PORTB_AMSEL_R used once
GPIO_PORTB_DEN_R 4005951C

Symbol: GPIO_PORTB_DEN_R
   Definitions
      At line 6 in file sensor.s
   Uses
      At line 72 in file sensor.s
Comment: GPIO_PORTB_DEN_R used once
GPIO_PORTB_DIR_R 40059400

Symbol: GPIO_PORTB_DIR_R
   Definitions
      At line 4 in file sensor.s
   Uses
      At line 59 in file sensor.s
Comment: GPIO_PORTB_DIR_R used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

GPIO_PORTB_ODR_R 4005950C

Symbol: GPIO_PORTB_ODR_R
   Definitions
      At line 9 in file sensor.s
   Uses
      At line 93 in file sensor.s
Comment: GPIO_PORTB_ODR_R used once
GPIO_PORTB_PCTL_R 4005952C

Symbol: GPIO_PORTB_PCTL_R
   Definitions
      At line 8 in file sensor.s
   Uses
      At line 78 in file sensor.s
Comment: GPIO_PORTB_PCTL_R used once
SYSCTL_PRGPIO_R 400FEA08

Symbol: SYSCTL_PRGPIO_R
   Definitions
      At line 13 in file sensor.s
   Uses
      At line 52 in file sensor.s
Comment: SYSCTL_PRGPIO_R used once
SYSCTL_PRGPIO_R12 00000002

Symbol: SYSCTL_PRGPIO_R12
   Definitions
      At line 15 in file sensor.s
   Uses
      At line 55 in file sensor.s
Comment: SYSCTL_PRGPIO_R12 used once
SYSCTL_RCGCGPIO_R 400FE608

Symbol: SYSCTL_RCGCGPIO_R
   Definitions
      At line 12 in file sensor.s
   Uses
      At line 46 in file sensor.s
Comment: SYSCTL_RCGCGPIO_R used once
SYSCTL_RCGCGPIO_R12 00000002

Symbol: SYSCTL_RCGCGPIO_R12
   Definitions
      At line 14 in file sensor.s
   Uses
      At line 48 in file sensor.s
Comment: SYSCTL_RCGCGPIO_R12 used once
SYSCTL_STCTRL E000E010

Symbol: SYSCTL_STCTRL
   Definitions
      At line 20 in file sensor.s
   Uses
      At line 237 in file sensor.s
      At line 249 in file sensor.s
      At line 254 in file sensor.s

SYSCTL_STCURRENT E000E018



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols


Symbol: SYSCTL_STCURRENT
   Definitions
      At line 18 in file sensor.s
   Uses
      At line 245 in file sensor.s
Comment: SYSCTL_STCURRENT used once
SYSCTL_STRELOAD E000E014

Symbol: SYSCTL_STRELOAD
   Definitions
      At line 19 in file sensor.s
   Uses
      At line 242 in file sensor.s
Comment: SYSCTL_STRELOAD used once
15 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

Start 00000000

Symbol: Start
   Definitions
      At line 36 in file sensor.s
   Uses
      None
Comment: Start unused
TEMPERATURA 00000000

Symbol: TEMPERATURA
   Definitions
      At line 37 in file sensor.s
   Uses
      None
Comment: TEMPERATURA unused
2 symbols
369 symbols in table
